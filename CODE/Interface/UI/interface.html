<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script type='text/javascript' src="{{ url_for('static', filename='js/disableBack.js') }}"></script>
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/stylesheet_nonresponsive.css') }}"> -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="interface.css">
        <script src="https://d3js.org/d3.v4.js"></script>
        <title>COVID-19 Records Assistant</title>

    </head>
    <style>
        .card {
            margin-bottom: 20px;
        }
    </style>



    
    <body>

    <div class="container">
        <div id = "header" align="center">
            <img src="medicalRecord.svg" style="width:90px;height:90px; margin-right: 10px;" alt="">
            <span style="font-size:28px;">COVID-19 Records Assistant</span>
        </div>
        

        <!-- <div class="progress"> -->
            <!-- <div id="progress" class="progress-bar" role="progressbar"></div> -->
        <!-- </div> -->
        <div class = "row">
            <div class="col-md-3 page" id="page1" >


                    <div id="filters">
           
                            <p style="font-size:20px; padding-top:15px;">Tags</p>

   

                    </div>
                    <!-- <p class="zoomInfo">(Click the image for zoom-in)</p> -->

    
  
            </div>
            <div class="col-md-9 page scroll frame" id="page2">

                <div id="searchBar" style="margin-top: 15px;">

                    
                    <div class="form-inline my-2 my-lg-0">
                        <input id="searchingInput" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" style="width:500px; font-size: 20px;" >
                          <button class="btn btn-outline-success my-2 my-sm-0" type="search" onclick="search()"  style="font-size: 20px;">Search</button>
                    </div>
                </div>
                <!-- <h4>Please enter the keyword that you want to search for.</h4> -->

                
                <div id="searchResults" 
                style="margin-top: 50px;  margin-right: 20px; margin-left: 20px; font-size: 18px; display: none;">
                    <p style="font-size: 16px; color: #bdbdbd;"><span id="num-of-results"></span> results </p>
                    


                </div>
            </div>
        </div>


        
    </div>


    <script>
        var cur_fitler = "Gun";





        
        var diseases = ['Sexual Health & STDs', 'Mental Health', 'Pain Management',
       'Digestive Health', 'Ear, Nose & Throat', 'Heart Health',
       'Brain & Nervous System Disorders', 'HIV/AIDS', 'Diabetes', 'Allergies',
       'Arthritis', 'Sleep', 'Fibromyalgia', 'Eye Health', 'Oral Health',
       'ADD/ADHD', 'Kidney Disorders', 'Multiple Sclerosis', 'Asthma',
       'Stroke', 'Lupus', 'Osteoporosis', 'Hepatitis C'];

       var posts = [
          {
            "disease": "Diabetes",
            "Heading": "Diabetes",
            "postContent": "Here recently I've had an increase of urination...Especially at night. I seem to be thirsty more and have dry mouth especially at night and when I wake up. I'm tired more often even though I get 8 plus hours of sleep at night. Also, I'm hungry all the time and sometimes not long after I eat.",
            "postTags": ["Symptoms"]
          },
          {
            "disease": "Diabetes",
            "Heading": "Foot Ulcer",
            "postContent": "I have had a foot ulcer for about 3 months now. The foot doctor keeps cutting it away but it doesn't seem to be healing. Any suggestions?",
            "postTags": ["Type 2 Diabetes"]
          },         
          {
            "disease": "Diabetes",
            "Heading": "i have low back pains so i have reduced my excerising   i have noticed that i am really have circulations problems   is there anything else i can do or take to help",
            "postContent": "i have low back pains so i have reduced my excerising scared of surgery i have noticed that i am really haveing circulations problems is there anything else i can do or take to help",
            "postTags": ["None"]
          },  
          {
            "disease": "Diabetes",
            "Heading": "my type 1 wife keeps nodding off",
            "postContent": "hey guys, so my wife was diagnosed with type 1 about 6 years ago (due to cancer radiation damaged her pancreas). the problem is that during all hours, she nods off quite frequently. what’s confusing is that she will nod off even if her blood sugar is normal. she gets pretty annoyed when I point this out or try to help. what does this mean? is it dangerous? I’m starting to get worried as this is a daily occurance. what should I do? help..!",
            "postTags": ["Type 1 Diabetes" , "Symptoms"]
          }, 
          {
            "disease": "Asthma",
            "Heading": "Restrictive Airway or prelude to Asthma?",
            "postContent": "About two years ago I had a severe chest cold, complete with chills and fever, that lasted about 2 weeks. Ever since then my throat feels as though there is something pressing against the front of it. It often causes me to cough and makes it difficult to catch my breath. I'm usually okay, but taking a deep breath sometimes will trigger the pressure sensation and then the coughing begins. Does anyone else have these symptoms? Have you received a valid diagnosis? What are your treatments?",
            "postTags": ["None"]
          },  
          {
            "disease": "Asthma",
            "Heading": "Chronic Day Time Cough ONLY",
            "postContent": "My son is 11 years old .Since three months he is coughing persistently ONLY in day time and during night while sleeping he doesnot cough . I took him to the regular doctor ( Pulmonologist) who treated my son for allergy and childhood asthma since 2009.The doctor took an X Ray of Chest PA view .He said the X Ray was clear .As usual prescribed Methyl Prednisolone for 5 days , Budecort and Levolin Rotocaps and Montekulast .The cough didnt go and after a week ,revisited the doctor . He gave a dose of Azithromycin for 5 days . Even later to it it didnot go . .Currently my son is consuming Budecort , Levolin and Montekulast and the cough doesnot go .OTC medicines diphenhydramine,Codeine (10 mg) + Chlorpheniramine (4 mg) didnot work either . There is no cough while he sleeps . Any advise please ?",
            "postTags": ["Living & Managing" , "Triggers" , "Treatment" , "Diagnosis" , "Tests"]
          }, 
          {
            "disease": "Asthma",
            "Heading": "Do I have asthma?",
            "postContent": "I am a 13 yr old female who has trouble breathing in or anywhere around smoke, humid air, dust, and pollen. My allergist (I have severe allergies to dust and pollen) says it's just allergies. I went to a sweat lodge (basically a tent filled with humid air) and I couldn't breathe. It felt like someone as closing my throat and sitting on my chest. My friend had to help me out because I felt like passing out. Is this asthma? Also I have had bronchitis before and took ProAir and it felt much better. Thanks for any help.",
            "postTags": ["Living & Managing" , "Triggers" , "Treatment" , "Diagnosis"]
          },    
          {
            "disease": "Allergies",
            "Heading": "I am allergic to fish oil pills, but have no seafood allergies...?",
            "postContent": "When I was around 8 years old, I began taking fish oil pills. I started itching heavily all over my body and subsequently quit taking the pills, soon after which the itching stopped.  Years later at 20 years old, I decided to try them again. This time, I developed hives all over my body, trouble breathing, and constricted airways. Needless to say, my reaction has become anaphylactic.  My question is if anyone else has experienced this issue?  I have done what seems like endless research only to find articles for people who have seafood allergies and want to take fish oil pills anyway. This is not me. I love seafood (literally all seafood), but the pills are what K.O. me. If anyone has found articles on this issue or if you are in the same boat, I'd love to hear from you!",
            "postTags": ["Hives" , "Food" , "Allergy Testing"]
          }

       ];

    
       function findCommonElements3(arr1, arr2) {
        return arr1.some(item => arr2.includes(item))
        }

        
        
        $(document).ready(function(){
            $(document).on('change', 'input[name="filterItem"]', function(e) {
                        
            var checked_filters = [];

            $('input[name="filterItem"]:checked').each(function() {
                checked_filters.push(this.value);
            });
                // console.log($('input[name="filterItem"]:checked').val());
                console.log(checked_filters);


                document.getElementById("searchResults").innerHTML = '<p style="font-size: 16px; color: #bdbdbd;"><span id="num-of-results"></span> results </p>'; 
                var cur_search_txt = document.getElementById('searchingInput').value;
                var result_cnt = 0;

                for (var i = 0; i < posts.length; i ++) {
                    if ((findCommonElements3(posts[i].postTags, checked_filters)) || (checked_filters.length == 0)) {
                        if (posts[i].disease == cur_search_txt) {

                            result_cnt += 1;

                            var postHeading = posts[i].Heading;
                            var category = posts[i].disease;
                            var postContent = posts[i].postContent;
                            var postTag = "";

                            for (var j = 0; j < posts[i].postTags.length; j ++) {
                                postTag += posts[i].postTags[j];
                                cur_unique_tags.push(posts[i].postTags[j]);
                                if (j != posts[i].postTags.length - 1) {
                                    postTag += ", ";
                                }
                            }
            
                            var card_html = 
                                '<div class="card">' +
                                '<h5 class="card-header search-keyword">Title: ' + postHeading + '</h5>' +
                                '<div class="card-body">' +
                                '<h5 class="card-title">Disease: ' + category + '</h5>' +
                                '<p class="card-text">Content: ' + postContent + '</h5>' +
                                '<p class="card-text">Tags: ' + postTag + '</p>' +
                                //   '<p class="card-text">' + postLink + '</p>' +
                                '</div>' +
                            '</div>';

                            
                            document.getElementById("searchResults").innerHTML += card_html;
                        }
                    }
                }

                document.getElementById("num-of-results").innerHTML = result_cnt;
                document.getElementById("searchResults").style.display = 'block';
            });








        });



        var cur_unique_tags = [];

        function search() {

            document.getElementById("filters").innerHTML = '<p style="font-size:20px">Tags</p>'
            cur_unique_tags = [];


            document.getElementById("searchResults").innerHTML = '<p style="font-size: 16px; color: #bdbdbd;"><span id="num-of-results"></span> results </p>'; 
            var cur_search_txt = document.getElementById('searchingInput').value;
            var result_cnt = 0;

 

            for (var i = 0; i < posts.length; i ++) {
                if (posts[i].disease == cur_search_txt) {
                    result_cnt += 1;

                    var postHeading = posts[i].Heading;
                    var category = posts[i].disease;
                    var postContent = posts[i].postContent;
                    var postTag = "";

                    for (var j = 0; j < posts[i].postTags.length; j ++) {
                        postTag += posts[i].postTags[j];
                        cur_unique_tags.push(posts[i].postTags[j]);
                        if (j != posts[i].postTags.length - 1) {
                            postTag += ", ";
                        }
                    }
       
                    var card_html = 
                        '<div class="card">' +
                        '<h5 class="card-header search-keyword">Title: ' + postHeading + '</h5>' +
                        '<div class="card-body">' +
                         '<h5 class="card-title">Disease: ' + category + '</h5>' +
                          '<p class="card-text">Content: ' + postContent + '</h5>' +
                          '<p class="card-text">Tags: ' + postTag + '</p>' +
                        //   '<p class="card-text">' + postLink + '</p>' +
                        '</div>' +
                      '</div>';

                      
                    document.getElementById("searchResults").innerHTML += card_html;
                }
            }

            document.getElementById("num-of-results").innerHTML = result_cnt;
            document.getElementById("searchResults").style.display = 'block';


            
            cur_unique_tags = [...new Set(cur_unique_tags)];
            for (var i = 0; i < cur_unique_tags.length; i ++) {
                filter_item = cur_unique_tags[i];
                var filter_item_html = 
                    '<input class="check-filter" type="checkbox" name="filterItem" id="' + 
                    filter_item + 
                    '" value="' + 
                    filter_item + 
                    '"  />&nbsp;<label for="' 
                    + filter_item + 
                    '">' + 
                    filter_item + 
                    '</label><br />';
                    document.getElementById("filters").innerHTML += filter_item_html;
            }
            
            



            


            // for filtering
            // var cards = document.getElementsByClassName("card");
            // for (var i = 0; i < cards.length; i ++) {
            //     if(cards.item(i).innerHTML.indexOf(cur_fitler) !== -1) {
            //         cards.item(i).style.display = 'block';

            //     }
            // }

        }


        // Process the data from backend
        
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- <script>window.jQuery || document.write('<script src="{{ url_for('static', filename='jquery.js') }}">\x3C/script>')</script> -->
   


    </body>
</html>
